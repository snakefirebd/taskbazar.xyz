<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trust Score - NextGen Premium</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <style>
        body { 
            margin: 0; padding: 0; font-family: 'Plus Jakarta Sans', sans-serif; 
            background: #f4f7fc; 
            color: #0f172a; padding-bottom: 60px; min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π */
        @keyframes slideUpFade { 0% { transform: translateY(40px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
        @keyframes pulseActive { 0% { box-shadow: 0 0 0 0 var(--pulse-color); } 70% { box-shadow: 0 0 20px 10px transparent; } 100% { box-shadow: 0 0 0 0 transparent; } }
        @keyframes floating { 0% { transform: translateY(0px); } 50% { transform: translateY(-8px); } 100% { transform: translateY(0px); } }
        @keyframes pulseWarning { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ */
        .zone-card {
            background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(20px);
            padding: 20px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.9);
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.03); display: flex; gap: 18px; align-items: center;
            opacity: 0; animation: slideUpFade 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .zone-card.active-zone {
            background: #ffffff; transform: scale(1.04); border-width: 2px;
            box-shadow: 0 20px 40px -8px rgba(0,0,0,0.12); z-index: 10;
        }

        .icon-box {
            width: 60px; height: 60px; border-radius: 20px; display: flex; justify-content: center; align-items: center; font-size: 28px; flex-shrink: 0; transition: 0.3s;
        }
        
        .progress-ring__circle {
            transition: stroke-dashoffset 1.5s cubic-bezier(0.1, 0.7, 0.1, 1), stroke 0.5s ease;
            transform: rotate(-90deg); transform-origin: 50% 50%;
        }

        /* ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ‡¶≤‡¶æ‡¶á‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .history-item {
            position: relative; padding-left: 25px; margin-bottom: 20px;
            opacity: 0; animation: slideUpFade 0.5s ease forwards;
        }
        .history-item::before {
            content: ''; position: absolute; left: 0; top: 5px; width: 10px; height: 10px;
            border-radius: 50%; z-index: 2; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .history-item:not(:last-child)::after {
            content: ''; position: absolute; left: 4px; top: 15px; width: 2px; height: calc(100% + 5px);
            background: #e2e8f0; z-index: 1;
        }
        .history-up::before { background: #10b981; }
        .history-down::before { background: #f43f5e; }
        
        .history-card {
            background: white; padding: 15px; border-radius: 16px; border: 1px solid #f1f5f9;
            box-shadow: 0 4px 15px rgba(0,0,0,0.02); display: flex; justify-content: space-between; align-items: center;
        }
        .h-time { font-size: 11px; color: #94a3b8; font-weight: 700; margin-bottom: 3px; display: block; }
        .h-reason { font-size: 13px; color: #334155; font-weight: 700; margin: 0; line-height: 1.4; }
        .h-score { font-size: 16px; font-weight: 800; padding: 4px 10px; border-radius: 10px; }
        .h-score.up { background: #ecfdf5; color: #059669; }
        .h-score.down { background: #fff1f2; color: #e11d48; }

    </style>
</head>
<body>

    <!-- Header (Premium Blue/Indigo Gradient) -->
    <div style="background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%); color: white; padding: 25px 20px 85px 20px; text-align: center; border-bottom-left-radius: 45px; border-bottom-right-radius: 45px; position: relative; overflow: hidden; box-shadow: 0 15px 40px rgba(59, 130, 246, 0.35);">
        
        <!-- ‡¶°‡ßá‡¶ï‡ßã‡¶∞‡ßá‡¶∂‡¶® (Modern Glass Orbs) -->
        <div style="position: absolute; top: -40px; left: -30px; width: 160px; height: 160px; background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%); border-radius: 50%; backdrop-filter: blur(5px); animation: floating 6s ease-in-out infinite;"></div>
        <div style="position: absolute; bottom: -20px; right: -40px; width: 140px; height: 140px; background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%); border-radius: 50%;"></div>
        
        <div style="display: flex; align-items: center; justify-content: space-between; max-width: 450px; margin: 0 auto; position: relative; z-index: 2;">
            <button onclick="window.history.back()" style="background: rgba(255,255,255,0.2); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 12px 18px; border-radius: 16px; font-weight: 800; font-size: 13px; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">‚ùÆ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï</button>
            <h2 style="margin: 0; font-size: 19px; font-weight: 800; letter-spacing: 0.5px; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</h2>
            <div style="width: 75px;"></div>
        </div>
    </div>

    <div style="max-width: 480px; margin: 0 auto; padding: 0 20px;">
        
        <!-- Main Dashboard Card -->
        <div id="score-card" style="background: #ffffff; border-radius: 35px; padding: 30px 20px 40px 20px; text-align: center; box-shadow: 0 30px 60px -15px rgba(59, 130, 246, 0.15); margin-top: -70px; position: relative; z-index: 10; border: 2px solid #ffffff; transition: all 0.5s ease;">
            
            <!-- ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶¨‡¶æ‡¶∞ (‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞) -->
            <div style="background: #f8fafc; padding: 15px 15px 25px 15px; border-radius: 20px; border: 1px solid #e2e8f0; margin-bottom: 25px;">
                <h4 style="margin: 0 0 15px 0; font-size: 13px; color: #475569; font-weight: 800; text-align: left; text-transform: uppercase; letter-spacing: 1px;">‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤</h4>
                
                <div style="position: relative; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; margin-top: 5px; z-index: 1;">
                    <!-- Background Line -->
                    <div style="position: absolute; top: 12px; left: 20px; right: 20px; height: 4px; background: #e2e8f0; z-index: -1; border-radius: 2px;"></div>
                    <!-- Active Line -->
                    <div id="level-progress-line" style="position: absolute; top: 12px; left: 20px; width: 0%; height: 4px; background: linear-gradient(90deg, #3b82f6, #60a5fa); z-index: -1; border-radius: 2px; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);"></div>

                    <!-- Step 1: ‡¶®‡¶§‡ßÅ‡¶® -->
                    <div style="position: relative; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                        <div id="step-1-icon" style="width: 28px; height: 28px; background: #cbd5e1; color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; font-weight: bold; transition: 0.4s;">1</div>
                        <span id="step-1-text" style="font-size: 12px; font-weight: 800; color: #94a3b8; position: absolute; top: 35px; white-space: nowrap; transition: 0.4s;">‡¶®‡¶§‡ßÅ‡¶®</span>
                    </div>

                    <!-- Step 2: ‡¶ú‡ßÅ‡¶®‡¶ø‡¶Ø‡¶º‡¶∞ -->
                    <div style="position: relative; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                        <div id="step-2-icon" style="width: 28px; height: 28px; background: #cbd5e1; color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; font-weight: bold; transition: 0.4s;">2</div>
                        <span id="step-2-text" style="font-size: 12px; font-weight: 800; color: #94a3b8; position: absolute; top: 35px; white-space: nowrap; transition: 0.4s;">‡¶ú‡ßÅ‡¶®‡¶ø‡¶Ø‡¶º‡¶∞</span>
                    </div>

                    <!-- Step 3: ‡¶™‡ßç‡¶∞‡ßã -->
                    <div style="position: relative; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                        <div id="step-3-icon" style="width: 28px; height: 28px; background: #cbd5e1; color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; font-weight: bold; transition: 0.4s;">3</div>
                        <span id="step-3-text" style="font-size: 12px; font-weight: 800; color: #94a3b8; position: absolute; top: 35px; white-space: nowrap; transition: 0.4s;">‡¶™‡ßç‡¶∞‡ßã</span>
                    </div>
                </div>
            </div>

            <p style="margin: 0; font-size: 13px; color: #64748b; font-weight: 800; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 2px;">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç</p>
            
            <!-- SVG Donut Chart -->
            <div style="position: relative; width: 190px; height: 190px; margin: 0 auto;">
                <svg width="190" height="190" viewBox="0 0 190 190" style="filter: drop-shadow(0 15px 20px rgba(0,0,0,0.06));">
                    <circle cx="95" cy="95" r="80" fill="none" stroke="#f1f5f9" stroke-width="16"></circle>
                    <circle id="svg-progress" class="progress-ring__circle" cx="95" cy="95" r="80" fill="none" stroke="#cbd5e1" stroke-width="16" stroke-linecap="round" stroke-dasharray="502.65" stroke-dashoffset="502.65"></circle>
                </svg>
                
                <!-- Inner Score Content -->
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <h1 id="score-value" style="margin: 0; font-size: 68px; font-weight: 800; color: #1e293b; line-height: 1; letter-spacing: -2px;">0</h1>
                    <span style="font-size: 15px; color: #94a3b8; font-weight: 800; margin-top: 2px;">/ ‡ßß‡ß¶‡ß¶</span>
                </div>
            </div>

            <!-- Status Info -->
            <div style="margin-top: 30px;">
                <h3 id="zone-name" style="margin: 0 0 10px 0; font-size: 28px; font-weight: 800; color: #1e293b;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá</h3>
                <span id="zone-status" style="font-size: 14px; font-weight: 800; color: #64748b; padding: 8px 20px; background: #f1f5f9; border-radius: 50px; display: inline-block;">‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</span>
            </div>
            
            <!-- Gamification Message (Next Level Target) -->
            <div id="next-level-msg" style="margin-top: 22px; font-size: 14px; font-weight: 800; color: #4f46e5; background: #eef2ff; padding: 12px; border-radius: 16px; display: none; border: 1px dashed #c7d2fe;">
                ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ú‡ßã‡¶®‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶Ü‡¶∞ <b>‡ßß‡ß´</b> ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá! üöÄ
            </div>

            <!-- Dynamic Action Message -->
            <div id="action-msg" style="margin-top: 20px; padding: 18px; border-radius: 22px; font-size: 14px; font-weight: 600; text-align: left; line-height: 1.6; background: #f8fafc; color: #64748b; border: 1px solid #e2e8f0; transition: all 0.3s ease;">
                ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
            </div>
        </div>

        <!-- ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ -->
        <div style="background: linear-gradient(135deg, #fff1f2 0%, #ffe4e6 100%); padding: 22px; border-radius: 26px; border: 1px solid #fecdd3; margin-top: 25px; box-shadow: 0 15px 30px -10px rgba(225, 29, 72, 0.15); display: flex; gap: 16px; align-items: flex-start; position: relative; overflow: hidden; animation: slideUpFade 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;">
            <div style="position: absolute; right: -20px; top: -20px; font-size: 80px; opacity: 0.05; transform: rotate(15deg);">‚ö†Ô∏è</div>
            
            <div style="background: #e11d48; color: white; width: 42px; height: 42px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; box-shadow: 0 8px 15px rgba(225, 29, 72, 0.3); animation: pulseWarning 2s infinite;">‚ö†Ô∏è</div>
            <div style="position: relative; z-index: 2;">
                <h4 style="margin: 0 0 6px 0; color: #9f1239; font-size: 16px; font-weight: 800; letter-spacing: 0.5px;">‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ</h4>
                <p style="margin: 0; font-size: 13.5px; color: #be123c; line-height: 1.6; font-weight: 600;">
                    ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡ßé‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ‡¶ì ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶¨ ‡¶Ü‡¶™‡¶®‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶∞‡¶ì ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶Ö‡¶∏‡ßé ‡¶â‡¶™‡¶æ‡ßü ‡¶Ö‡¶¨‡¶≤‡¶Æ‡ßç‡¶¨‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø <b>‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶°</b> ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§
                </p>
            </div>
        </div>

        <!-- ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <div style="margin-top: 40px; margin-bottom: 25px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 15px; padding: 0 5px;">
                <h3 style="margin: 0; font-size: 19px; font-weight: 800; color: #0f172a; display: flex; align-items: center; gap: 8px;">
                    <span style="background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.05); padding: 6px; border-radius: 10px; font-size: 16px;">‚è±Ô∏è</span> ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø
                </h3>
            </div>
            
            <div id="history-container" style="padding-left: 5px;">
                <div style="text-align: center; padding: 20px; color: #94a3b8; font-size: 13px; font-weight: 600;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            </div>
        </div>

        <!-- ‡¶®‡¶ø‡ßü‡¶Æ ‡¶ì ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
        <div style="display: flex; justify-content: space-between; align-items: flex-end; margin: 40px 5px 25px 5px;">
            <h3 style="margin: 0; font-size: 19px; font-weight: 800; color: #0f172a; display: flex; align-items: center; gap: 8px;">
                <span style="background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.05); padding: 6px; border-radius: 10px; font-size: 16px;">üìä</span> ‡¶®‡¶ø‡ßü‡¶Æ ‡¶ì ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ
            </h3>
            <span style="font-size: 12px; font-weight: 700; color: #94a3b8;">*‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ú‡ßã‡¶® ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡¶æ</span>
        </div>

        <div style="display: flex; flex-direction: column; gap: 16px; padding-bottom: 30px;">
            
            <div id="card-green" class="zone-card" style="animation-delay: 0.1s;">
                <div class="icon-box" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);">üåü</div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <h4 style="margin: 0; color: #065f46; font-weight: 800; font-size: 17px;">‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶ú‡ßã‡¶®</h4>
                        <span style="font-size: 12px; font-weight: 800; background: #d1fae5; color: #059669; padding: 4px 12px; border-radius: 10px;">‡ßÆ‡ßß-‡ßß‡ß¶‡ß¶</span>
                    </div>
                    <p style="margin: 0; font-size: 13px; color: #475569; font-weight: 600; line-height: 1.5;">‡¶∏‡¶¨ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° <b>‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞‡ßá</b> ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§</p>
                </div>
            </div>

            <div id="card-white" class="zone-card" style="animation-delay: 0.2s;">
                <div class="icon-box" style="background: linear-gradient(135deg, #64748b 0%, #475569 100%); box-shadow: 0 10px 20px rgba(100, 116, 139, 0.3);">üëç</div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <h4 style="margin: 0; color: #334155; font-weight: 800; font-size: 17px;">‡¶∏‡¶æ‡¶¶‡¶æ ‡¶ú‡ßã‡¶®</h4>
                        <span style="font-size: 12px; font-weight: 800; background: #f1f5f9; color: #475569; padding: 4px 12px; border-radius: 10px;">‡ß¨‡ßß-‡ßÆ0</span>
                    </div>
                    <p style="margin: 0; font-size: 13px; color: #475569; font-weight: 600; line-height: 1.5;">‡¶∏‡¶¨ ‡¶ï‡¶æ‡¶ú ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶Ü‡¶õ‡ßá‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° <b>‡¶®‡¶∞‡¶Æ‡¶æ‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá</b> ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§</p>
                </div>
            </div>

            <div id="card-yellow" class="zone-card" style="animation-delay: 0.3s;">
                <div class="icon-box" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);">‚ö†Ô∏è</div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <h4 style="margin: 0; color: #92400e; font-weight: 800; font-size: 17px;">‡¶π‡¶≤‡ßÅ‡¶¶ ‡¶ú‡ßã‡¶®</h4>
                        <span style="font-size: 12px; font-weight: 800; background: #fef3c7; color: #b45309; padding: 4px 12px; border-radius: 10px;">‡ß™‡ßß-‡ß¨‡ß¶</span>
                    </div>
                    <p style="margin: 0; font-size: 13px; color: #475569; font-weight: 600; line-height: 1.5;">‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ <b>‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶¨‡¶®‡ßç‡¶ß‡•§</b></p>
                </div>
            </div>

            <div id="card-black" class="zone-card" style="animation-delay: 0.4s;">
                <div class="icon-box" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); box-shadow: 0 10px 20px rgba(30, 41, 59, 0.4);">üëÅÔ∏è</div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <h4 style="margin: 0; color: #0f172a; font-weight: 800; font-size: 17px;">‡¶ï‡¶æ‡¶≤‡ßã ‡¶ú‡ßã‡¶®</h4>
                        <span style="font-size: 12px; font-weight: 800; background: #e2e8f0; color: #1e293b; padding: 4px 12px; border-radius: 10px;">‡ß®‡ßß-‡ß™‡ß¶</span>
                    </div>
                    <p style="margin: 0; font-size: 13px; color: #475569; font-weight: 600; line-height: 1.5;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶®‡¶ú‡¶∞‡¶¶‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶Ü‡¶õ‡ßá‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶¨ ‡¶ï‡¶æ‡¶ú <b>‡¶ö‡ßá‡¶ï ‡¶π‡¶¨‡ßá</b>‡•§</p>
                </div>
            </div>

            <div id="card-red" class="zone-card" style="animation-delay: 0.5s;">
                <div class="icon-box" style="background: linear-gradient(135deg, #f43f5e 0%, #be123c 100%); box-shadow: 0 10px 20px rgba(244, 63, 94, 0.3);">üö´</div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <h4 style="margin: 0; color: #9f1239; font-weight: 800; font-size: 17px;">‡¶≤‡¶æ‡¶≤ ‡¶ú‡ßã‡¶®</h4>
                        <span style="font-size: 12px; font-weight: 800; background: #ffe4e6; color: #e11d48; padding: 4px 12px; border-radius: 10px;">‡ß¶-‡ß®‡ß¶</span>
                    </div>
                    <p style="margin: 0; font-size: 13px; color: #475569; font-weight: 600; line-height: 1.5;"><b>‡¶∏‡¶¨ ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¨‡¶®‡ßç‡¶ß‡•§</b> ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡ßü ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§</p>
                </div>
            </div>

        </div>
    </div>

    <!-- Firebase App & Logic -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDgFaTrHW7Grp_Q22p6KNcHZxaEujHsLsE",
            authDomain: "exchange-project-d4028.firebaseapp.com",
            databaseURL: "https://exchange-project-d4028-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "exchange-project-d4028",
            storageBucket: "exchange-project-d4028.firebasestorage.app",
            messagingSenderId: "313976742479",
            appId: "1:313976742479:web:45951b360d875c4768c03a"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.database();
        const appId = "exchange-project-d4028";

        const zones = [
            { id: "green", max: 100, min: 81, name: "‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶ú‡ßã‡¶®", status: "‡¶∏‡ßá‡¶∞‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞", 
              color: "#10b981", bgColor: "#ecfdf5", msgColor: "#065f46", 
              message: "‚úÖ <b>‡¶ñ‡ßÅ‡¶¨ ‡¶≠‡¶æ‡¶≤‡ßã!</b> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶¨ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶Ü‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶™‡¶æ‡¶¨‡ßá‡•§" },
            
            { id: "white", max: 80, min: 61, name: "‡¶∏‡¶æ‡¶¶‡¶æ ‡¶ú‡ßã‡¶®", status: "‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞", 
              color: "#64748b", bgColor: "#f8fafc", msgColor: "#334155", 
              message: "‚ÑπÔ∏è ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶®‡¶ø‡ßü‡¶Æ‡ßá ‡¶Ü‡¶õ‡ßá‡¶®‡•§ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶ú‡ßã‡¶®‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¨‡ßá‡¶∂‡¶ø ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡¶æ‡ßü‡•§" },
            
            { id: "yellow", max: 60, min: 41, name: "‡¶π‡¶≤‡ßÅ‡¶¶ ‡¶ú‡ßã‡¶®", status: "‡¶∏‡¶§‡¶∞‡ßç‡¶ï ‡¶á‡¶â‡¶ú‡¶æ‡¶∞", 
              color: "#f59e0b", bgColor: "#fffbeb", msgColor: "#92400e", 
              message: "‚ö†Ô∏è <b>‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ!</b> ‡¶∏‡ßç‡¶ï‡ßã‡¶∞‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá <b>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶Ü‡¶õ‡ßá‡•§</b> ‡¶®‡¶ø‡ßü‡¶Æ ‡¶Æ‡ßá‡¶®‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡¶æ‡ßú‡¶æ‡¶≤‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§" },
            
            { id: "black", max: 40, min: 21, name: "‡¶ï‡¶æ‡¶≤‡ßã ‡¶ú‡ßã‡¶®", status: "‡¶®‡¶ú‡¶∞‡¶¶‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶Ü‡¶õ‡ßá‡¶®", 
              color: "#1e293b", bgColor: "#f1f5f9", msgColor: "#0f172a", 
              message: "üëÅÔ∏è <b>‡¶®‡¶ú‡¶∞‡¶¶‡¶æ‡¶∞‡¶ø!</b> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶®‡¶ú‡¶∞‡ßá ‡¶Ü‡¶õ‡ßá‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶¨ ‡¶ï‡¶æ‡¶ú ‡¶ó‡¶≠‡ßÄ‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶≠‡ßÅ‡¶≤ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶π‡¶¨‡ßá‡¶®‡•§" },
            
            { id: "red", max: 20, min: 0, name: "‡¶≤‡¶æ‡¶≤ ‡¶ú‡ßã‡¶®", status: "‡¶¨‡¶ø‡¶™‡¶¶‡¶ú‡¶®‡¶ï", 
              color: "#f43f5e", bgColor: "#fff1f2", msgColor: "#9f1239", 
              message: "üö´ <b>‡¶¨‡¶ø‡¶™‡¶¶!</b> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶§‡¶≤‡¶æ‡¶®‡¶ø‡¶§‡ßá‡•§ <b>‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶¨‡¶®‡ßç‡¶ß</b> ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø‡¶ü‡¶ø ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡ßü‡ßá ‡¶Ü‡¶õ‡ßá‡•§" }
        ];

        auth.onAuthStateChanged(user => {
            if (user) {
                // Fetch Score
                const scoreRef = db.ref(`artifacts/${appId}/users/${user.uid}/stats/trustScore`);
                scoreRef.on('value', snapshot => {
                    let score = snapshot.val();
                    if (score === null) {
                        score = 100;
                        scoreRef.set(100); 
                    }
                    animateScoreUpdate(score);
                });

                // Fetch User Level (‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞)
                const levelRef = db.ref(`artifacts/${appId}/users/${user.uid}/stats/userLevel`);
                levelRef.on('value', snapshot => {
                    let level = snapshot.val();
                    // ‡¶Ø‡¶¶‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ü‡¶ó‡ßá ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶¨‡ßá ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡ßß (‡¶®‡¶§‡ßÅ‡¶®) ‡¶π‡¶¨‡ßá
                    if (level === null) {
                        level = 1; 
                        levelRef.set(1); 
                    }
                    updateUserLevelUI(level);
                });

                // Fetch History
                fetchHistory(user.uid);
            } else {
                let localScore = localStorage.getItem('guest_trust_score') || 100;
                animateScoreUpdate(parseInt(localScore));
                
                // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶ó‡ßá‡¶∏‡ßç‡¶ü ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶´‡ßá‡¶ö ‡¶ï‡¶∞‡¶æ 
                let localLevel = localStorage.getItem('guest_user_level') || 1;
                updateUserLevelUI(parseInt(localLevel));
                
                // Show demo history for guests
                showDemoHistory();
            }
        });

        // ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function updateUserLevelUI(level) {
            const line = document.getElementById('level-progress-line');
            const icons = [
                document.getElementById('step-1-icon'),
                document.getElementById('step-2-icon'),
                document.getElementById('step-3-icon')
            ];
            const texts = [
                document.getElementById('step-1-text'),
                document.getElementById('step-2-text'),
                document.getElementById('step-3-text')
            ];

            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶∏‡¶¨ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            icons.forEach(icon => {
                icon.style.background = '#cbd5e1';
                icon.style.boxShadow = 'none';
            });
            texts.forEach(text => text.style.color = '#94a3b8');

            // ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ì ‡¶≤‡¶æ‡¶á‡¶® ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            if (level >= 1) {
                line.style.width = '0%';
                icons[0].style.background = '#3b82f6';
                icons[0].style.boxShadow = '0 0 0 4px #eff6ff';
                texts[0].style.color = '#3b82f6';
            }
            if (level >= 2) {
                line.style.width = '50%';
                icons[1].style.background = '#3b82f6';
                icons[1].style.boxShadow = '0 0 0 4px #eff6ff';
                texts[1].style.color = '#3b82f6';
            }
            if (level >= 3) {
                line.style.width = '100%';
                icons[2].style.background = '#3b82f6';
                icons[2].style.boxShadow = '0 0 0 4px #eff6ff';
                texts[2].style.color = '#3b82f6';
            }
        }

        // ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function fetchHistory(uid) {
            const historyRef = db.ref(`artifacts/${appId}/users/${uid}/trustHistory`);
            
            historyRef.orderByChild('timestamp').limitToLast(10).on('value', snapshot => {
                const container = document.getElementById('history-container');
                const data = snapshot.val();
                
                container.innerHTML = ''; // Clear loading text
                
                if (!data) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 25px 20px; background: white; border-radius: 20px; border: 1px dashed #cbd5e1; color: #94a3b8;">
                            <span style="font-size: 24px; display: block; margin-bottom: 8px;">üìã</span>
                            <p style="margin: 0; font-size: 13px; font-weight: 600;">‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü‡¶®‡¶ø‡•§<br>‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡ßß‡ß¶‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá‡•§</p>
                        </div>
                    `;
                    return;
                }

                // Object to array & sort by newest first
                const historyList = Object.keys(data).map(key => data[key]).sort((a, b) => b.timestamp - a.timestamp);
                
                let delay = 0.1;
                historyList.forEach(item => {
                    const isUp = item.type === 'increase';
                    const sign = isUp ? '+' : '-';
                    const cssClass = isUp ? 'history-up' : 'history-down';
                    const scoreClass = isUp ? 'up' : 'down';
                    
                    // Date formatting
                    const dateObj = new Date(item.timestamp);
                    const dateStr = dateObj.toLocaleDateString('bn-BD', { day: 'numeric', month: 'short', year: 'numeric' });
                    const timeStr = dateObj.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' });

                    const html = `
                        <div class="history-item ${cssClass}" style="animation-delay: ${delay}s;">
                            <div class="history-card">
                                <div>
                                    <span class="h-time">${dateStr}, ${timeStr}</span>
                                    <p class="h-reason">${item.reason}</p>
                                </div>
                                <div class="h-score ${scoreClass}">
                                    ${sign}${item.points}
                                </div>
                            </div>
                        </div>
                    `;
                    container.innerHTML += html;
                    delay += 0.1;
                });
            });
        }

        // ‡¶°‡ßá‡¶Æ‡ßã ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø (‡¶≤‡¶ó‡¶á‡¶® ‡¶õ‡¶æ‡ßú‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        function showDemoHistory() {
            const container = document.getElementById('history-container');
            container.innerHTML = `
                <div class="history-item history-down" style="animation-delay: 0.1s;">
                    <div class="history-card">
                        <div>
                            <span class="h-time">‡¶Ü‡¶ú, ‡ßß‡ß¶:‡ßß‡ß´ ‡¶∏‡¶ï‡¶æ‡¶≤</span>
                            <p class="h-reason">‡¶≠‡ßÅ‡¶≤ ‡¶∏‡¶ø‡¶ï‡ßç‡¶∞‡ßá‡¶ü ‡¶ï‡ßã‡¶° ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ</p>
                        </div>
                        <div class="h-score down">-‡ßß‡ß¶</div>
                    </div>
                </div>
                <div class="history-item history-up" style="animation-delay: 0.2s;">
                    <div class="history-card">
                        <div>
                            <span class="h-time">‡¶ó‡¶§‡¶ï‡¶æ‡¶≤, ‡ß¶‡ß™:‡ß©‡ß¶ ‡¶¨‡¶ø‡¶ï‡¶æ‡¶≤</span>
                            <p class="h-reason">‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡¶ø‡¶∂‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡¶æ</p>
                        </div>
                        <div class="h-score up">+‡ß®</div>
                    </div>
                </div>
                <div class="history-item history-down" style="animation-delay: 0.3s;">
                    <div class="history-card">
                        <div>
                            <span class="h-time">‡ß® ‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá</span>
                            <p class="h-reason">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ï‡¶∞‡ßç‡¶§‡ßÉ‡¶ï ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</p>
                        </div>
                        <div class="h-score down">-‡ß®‡ß´</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <span style="font-size: 11px; color: #94a3b8; font-weight: 700; background: #e2e8f0; padding: 4px 10px; border-radius: 20px;">‡¶è‡¶ü‡¶ø ‡¶°‡ßá‡¶Æ‡ßã ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡•§ ‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</span>
                </div>
            `;
        }

        function animateScoreUpdate(targetScore) {
            if(targetScore > 100) targetScore = 100;
            if(targetScore < 0) targetScore = 0;

            let currentScore = 0;
            const scoreValueEl = document.getElementById('score-value');
            const svgCircle = document.getElementById('svg-progress');
            
            const circumference = 502.65;
            
            const interval = setInterval(() => {
                if(currentScore >= targetScore) {
                    clearInterval(interval);
                    currentScore = targetScore;
                    applyZoneUI(currentScore); 
                }
                scoreValueEl.innerText = currentScore;
                
                const offset = circumference - (currentScore / 100) * circumference;
                svgCircle.style.strokeDashoffset = offset;
                
                currentScore++;
            }, 15);
        }

        function applyZoneUI(score) {
            let currentZone = zones.find(z => score >= z.min && score <= z.max);
            
            if (currentZone) {
                const svgCircle = document.getElementById('svg-progress');
                svgCircle.style.stroke = currentZone.color;
                
                const card = document.getElementById('score-card');
                card.style.boxShadow = `0 30px 60px -15px ${currentZone.color}40`;
                card.style.borderColor = currentZone.color + "30"; 

                document.getElementById('score-value').style.color = currentZone.color;
                
                document.getElementById('zone-name').innerText = currentZone.name;
                document.getElementById('zone-name').style.color = currentZone.color;
                
                let statusBadge = document.getElementById('zone-status');
                statusBadge.innerText = currentZone.status;
                statusBadge.style.color = currentZone.color;
                statusBadge.style.backgroundColor = currentZone.bgColor;
                
                let msgBox = document.getElementById('action-msg');
                msgBox.innerHTML = currentZone.message;
                msgBox.style.backgroundColor = currentZone.bgColor;
                msgBox.style.color = currentZone.msgColor;
                msgBox.style.borderColor = currentZone.color + "40";

                let nextMsg = document.getElementById('next-level-msg');
                if (score < 81) {
                    let nextZone = zones.find(z => z.min > score);
                    if(nextZone) {
                        let pointsNeeded = nextZone.min - score;
                        nextMsg.innerHTML = `‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ú‡ßã‡¶®‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶Ü‡¶∞ <b>${pointsNeeded}</b> ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶æ‡¶ó‡¶¨‡ßá! üöÄ`;
                        nextMsg.style.display = 'block';
                    }
                } else {
                    nextMsg.style.display = 'none';
                }

                document.querySelectorAll('.zone-card').forEach(el => {
                    el.classList.remove('active-zone');
                    el.style.borderColor = "rgba(255,255,255,0.9)";
                    el.style.setProperty('--pulse-color', 'transparent');
                });
                
                let activeCard = document.getElementById(`card-${currentZone.id}`);
                if (activeCard) {
                    activeCard.classList.add('active-zone');
                    activeCard.style.borderColor = currentZone.color;
                    activeCard.style.setProperty('--pulse-color', currentZone.color + "40");
                    activeCard.style.animation = "slideUpFade 0.7s forwards, pulseActive 2s infinite";
                }
            }
        }
    </script>
</body>
</html>

